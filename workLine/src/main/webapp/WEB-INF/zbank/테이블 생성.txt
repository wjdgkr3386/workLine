#데이터베이스 생성
CREATE DATABASE work_line DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;

#데이터베이스 선택
use work_line;

#회원 테이블 생성
create table member(                
    uuid    varchar(100)   primary key,
    name    varchar(20)    not null,
    mid     varchar(30)    unique,
    pwd     varchar(40)    not null,
    phone   varchar(22)    not null,
    img		varchar(500)   default 'https://play-lh.googleusercontent.com/38AGKCqmbjZ9OuWx4YjssAz3Y0DTWbiM5HB0ove1pNBq_o9mtWfGszjZNxZdwt_vgHo'
);

#채팅방
create table chat_room (
    room_id      varchar(200) primary key,  -- 채팅방 고유 번호
    member_uuid  varchar(100) not null      -- 참여자
);

#채팅
create table chat_message (
    room_id      varchar(200) not null,                      -- 채팅방 고유 번호
    member_uuid  varchar(100) not null,                      -- 참여자
    content		 longtext     not null,				         -- 채팅 내용
    chat_id		 bigint       not null,   					 -- 채팅 번호
    create_date  timestamp    default current_timestamp,     -- 시간
    foreign key (room_id) references chat_room(room_id)
);

#1:1 채팅방
create table chat_room_direct(
	room_id	varchar(100)		primary key,  -- 채팅방 고유 번호
    member_uuid	varchar(100)	not null      -- 참여자
);

#1:1 채팅 내역
create table chat_direct_message(
	room_id			varchar(200)	not null,                      -- 채팅방 고유 번호
	member_uuid		varchar(100)	not null,                      -- 참여자
    content			longtext		not null,				       -- 채팅 내용
    chat_id			bigint			not null,					   -- 채팅 번호
    create_date		timestamp		default current_timestamp,     -- 시간
    foreign key (room_id) references chat_room_direct(room_id)
);

#친구
create table friend (
    uuid    	varchar(100)	not null,
    friendCode	varchar(100)	not null
);
